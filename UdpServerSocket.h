////////////////////////////////////////////////////////////////////////////////////////////////////
// IpPyProxy
//
// Copyright ©2008 Liam Kirton <liam@int3.ws>
////////////////////////////////////////////////////////////////////////////////////////////////////
// UdpServerSocket.h
//
// Created: 15/03/2008
////////////////////////////////////////////////////////////////////////////////////////////////////

#pragma once

////////////////////////////////////////////////////////////////////////////////////////////////////

#include "Socket.h"

////////////////////////////////////////////////////////////////////////////////////////////////////

class UdpClientSocket;

class UdpServerSocket : public Socket
{
public:
	UdpServerSocket(UdpClientSocket *udpClientSocket, unsigned int ip, unsigned short port);
public:
	~UdpServerSocket();

	Socket *OnAccept(SOCKET hSocket);
	void OnConnect();
	void OnDisconnect();
	void OnReceive(unsigned char *buffer, unsigned int length, unsigned int ip = 0, unsigned short port = 0);
	void OnSendCompletion(DWORD dwNumberOfBytes);

protected:
	friend class UdpClientSocket;

	UdpClientSocket *udpClientSocket_;

	unsigned int ip_;
	unsigned short port_;
};

////////////////////////////////////////////////////////////////////////////////////////////////////
